---
name: zettel-brainstormer
description: It reads from your local zettelkasten notes, find a random idea, and find references by links or tags, then expand the idea with the references.
---

# Zettel Brainstormer üß†

This skill formalizes the process of taking a rough idea or draft and enriching it with deep research, diverse perspectives, and structured brainstorming.

## New Dual-Stage Workflow

This skill now supports a two-stage pipeline to balance cost and quality:

1) Preprocess & Extraction (cheap model)

- Run a lightweight extraction step using OpenRouter's kimi-k2.5 to produce:
  - Short bullet-point keypoints
  - Candidate headings and tags
  - Minimal bibliography/search queries
- Output format (JSON): `{"headlines":[], "points":[], "queries":[]}`.

2) Draft & Humanize (pro model)

- Use a pro model (configurable; default: openai/gpt-5.2) to expand the best outline into a full draft.
- Post-process the draft with if exists, to make voice natural. Use the `humanizer` skill if available.
- Add proper Obsidian properties, tags, and links. Use the `obsidian` skill if available. Pick up properties and follow examples from other obsidian notes to keep the style consistent.

## Files & Scripts

This skill includes the following resources under the skill folder:

- scripts/preprocess.py  -- call kimi-k2.5, extract key points, write JSON
- scripts/draft.py       -- call pro model with outline + references, produce final Markdown
- references/templates.md -- output templates, headline/lead examples, tone guide
- config/models.json     -- user-selectable pro model setting

## Configuration & Setup

**First Run Setup**:
Before using this skill, you must run the setup script to configure models and directories.

```bash
python scripts/setup.py
```

This will create `config/models.json` with your preferences. You can press ENTER to accept defaults.

**Configuration Fields**:
- `pro_model`: The model used for drafting (default: `openai/gpt-5.2`)
- `preprocess_model`: Cheap model for extraction (default: `openrouter/x-ai/kimi-k2.5`)
- `zettel_dir`: Path to your Zettelkasten notes
- `output_dir`: Path where drafts should be saved

To change settings later, you can edit `config/models.json` directly or re-run `scripts/setup.py`.


## Usage

- Trigger when user asks: "brainstorm X", "expand this draft", "research and add notes to <path>".
- Example command (pseudo):
  1. If not configured, run `python scripts/setup.py` first.
  2. read <path_to_note>
  3. scripts/preprocess.py --input <path> --output /tmp/outline.json
  4. scripts/draft.py --outline /tmp/outline.json --model openai/gpt-5.2 --out /tmp/draft.md
  5. humanizer --in /tmp/draft.md --out /tmp/draft.human.md
  6. edit <path_to_note> append /tmp/draft.human.md under header `## üß† Brainstorming (YYYY-MM-DD)`

## Notes for maintainers

- Keep preprocess outputs small (200-600 tokens) to save cost.
- Ensure all external links are included in the `References` section with full titles and URLs.
- When appending, always include a timestamp and short provenance line (e.g., "Generated by writing-brainstormer; preprocessed with kimi-k2.5; draft with gpt-5.2").

## Example Output Format (unchanged)

```markdown
... [Original Draft Content] ...

---
## üß† Brainstorming & Research (2026-02-07)

### üßä Core Metaphor: The Iceberg
[Expansion of the idea...]

### üìö References
*   **James C. Scott:** *Seeing Like a State* ‚Äî Discusses Metis vs Techne...
*   **Gall's Law:** [Link/Summary]

### üê¶ Signals
*   **@user on X:** Argues that [point] ... [Link]

Tags: #brainstorming #research #zettelkasten
```
