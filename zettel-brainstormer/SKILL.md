---
name: zettel-brainstormer
description: It reads from your local zettelkasten notes, find a random idea, and find references by links or tags, then expand the idea with the references.
---

# Zettel Brainstormer üß†

This skill formalizes the process of taking a rough idea or draft and enriching it with deep research, diverse perspectives, and structured brainstorming.

## New Dual-Stage Workflow

This skill now supports a two-stage pipeline to balance cost and quality:

1) Preprocess & Extraction (cheap model)

- Run a lightweight extraction step to produce:
  - Short bullet-point keypoints
  - Candidate headings and tags
  - Minimal bibliography/search queries
  - **Wikilinked documents** (follows [[wikilinks]] N levels deep, up to M total docs)
  - **Tag-similar documents** (finds notes with overlapping tags)
- Output format (JSON): `{"headlines":[], "points":[], "queries":[], "linked_docs":[], "tag_similar_docs":[]}`.

2) Draft & Humanize (pro model)

- Use a pro model (configurable; default: openai/gpt-5.2) to expand the best outline into a full draft.
- Post-process the draft with if exists, to make voice natural. Use the `humanizer` skill if available.
- Add proper Obsidian properties, tags, and links. Use the `obsidian` skill if available. Pick up properties and follow examples from other obsidian notes to keep the style consistent.

## Files & Scripts

This skill includes the following resources under the skill folder:

- scripts/preprocess.py  -- extract key points, wikilinks, and tag-similar docs; write JSON
- scripts/draft.py       -- call pro model with outline + references, produce final Markdown
- scripts/wikilink_extractor.py -- (standalone) extract [[wikilinks]] from notes recursively
- references/templates.md -- output templates, headline/lead examples, tone guide
- config/models.json     -- user-selectable model and research settings

## Configuration & Setup

**First Run Setup**:
Before using this skill, you must run the setup script to configure models and directories.

```bash
python scripts/setup.py
```

This will create `config/models.json` with your preferences. You can press ENTER to accept defaults.

**Configuration Fields**:
- `pro_model`: The model used for drafting (defaults to agent's current model)
- `preprocess_model`: Cheap model for extraction (defaults to agent's current model)
- `zettel_dir`: Path to your Zettelkasten notes
- `output_dir`: Path where drafts should be saved
- `search_skill`: Which search skill to use for web/X research (web_search, brave_search, or none)
- `link_depth`: How many levels deep to follow [[wikilinks]] (N levels, default: 2)
- `max_links`: Maximum total linked notes to include (M links, default: 10)

To change settings later, you can edit `config/models.json` directly or re-run `scripts/setup.py`.

**Note**: When using this skill, the agent will inform you of the current link_depth and max_links settings in the final result.


## Usage

- Trigger when user asks: "brainstorm X", "expand this draft", "research and add notes to <path>".
- Example workflow (pseudo):
  1. If not configured, config will use agent's current model by default (or run `python scripts/setup.py` for custom settings)
  2. Pick a random seed note from zettelkasten
  3. Preprocess: `scripts/preprocess.py --input <seed_note> --output /tmp/outline.json`
     - This automatically extracts wikilinks (depth=N, max=M) and tag-similar docs
  4. Research using configured search_skill (if not "none")
  5. Draft: `scripts/draft.py --outline /tmp/outline.json --model <pro_model> --out /tmp/draft.md`
  6. (Optional) Humanize: `humanizer --in /tmp/draft.md --out /tmp/draft.human.md`
  7. Append result to seed note or save to output_dir
  8. **Inform user**: "Extracted wikilinks with depth=N, max_links=M using search_skill=<skill>"

## Notes for maintainers

- Keep preprocess outputs small (200-600 tokens) to save cost.
- Ensure all external links are included in the `References` section with full titles and URLs.
- When appending, always include a timestamp and short provenance line (e.g., "Generated by writing-brainstormer; preprocessed with kimi-k2.5; draft with gpt-5.2").

## Example Output Format (unchanged)

```markdown
... [Original Draft Content] ...

---
## üß† Brainstorming & Research (2026-02-07)

### üßä Core Metaphor: The Iceberg
[Expansion of the idea...]

### üìö References
*   **James C. Scott:** *Seeing Like a State* ‚Äî Discusses Metis vs Techne...
*   **Gall's Law:** [Link/Summary]

### üê¶ Signals
*   **@user on X:** Argues that [point] ... [Link]

Tags: #brainstorming #research #zettelkasten
```
